# ACO-VRPTW

基于蚁群算法(ACO)求解带时间窗的车辆路径问题(VRPTW)的Python实现。

## 项目结构

```
src/vrptw/
├── core/           # 核心算法模块
│   └── aco.py
├── data/          # 数据处理和测试用例
│   ├── data_loader.py
│   ├── c101.txt
│   ├── r101.txt
│   └── rc101.txt
├── utils/         # 工具函数模块
│   └── utils.py
├── visualization/ # 可视化模块
│   └── visualizer.py
└── config/       # 配置模块
    └── config.py
```

## 安装依赖

```bash
pip install -r requirements.txt
```

## 使用方法

### 基本用法

1. 运行默认测试用例（c101.txt）：
```bash
python main.py
```

2. 运行指定测试用例：
```bash
python main.py --instance r101.txt
```

3. 自定义算法参数：
```bash
python main.py --instance rc101.txt --ants 100 --iterations 200
```

### 命令行参数说明

- `--instance`: 测试用例文件名（默认：c101.txt）
- `--ants`: 蚂蚁数量（默认：50）
- `--iterations`: 最大迭代次数（默认：100）

### 测试用例说明

项目提供了三种类型的测试用例：

1. C类问题（c101.txt）
   - 客户点呈聚类分布
   - 适合评估算法处理聚类数据的能力
   - 紧时间窗约束

2. R类问题（r101.txt）
   - 客户点随机分布
   - 测试算法的通用性能
   - 中等时间窗约束

3. RC类问题（rc101.txt）
   - 客户点混合分布（既有聚类也有随机）
   - 评估算法在复杂场景下的表现
   - 多样化的时间窗约束

### 测试用例数据格式

每行数据格式：
```
客户编号 x坐标 y坐标 需求量 时间窗开始 时间窗结束 服务时间
```

- 第1行：配送中心信息
- 第2行起：客户点信息
- 所有客户的服务时间均为10个时间单位
- 配送中心时间窗为[0, 230]或[0, 240]

### 运行建议

1. 标准配置（适合一般问题）：
```bash
python main.py --instance c101.txt --ants 50 --iterations 100
```

2. 高精度配置（适合复杂问题）：
```bash
python main.py --instance rc101.txt --ants 100 --iterations 200
```

3. 快速测试配置（用于调试）：
```bash
python main.py --instance r101.txt --ants 30 --iterations 50
```

## 输出结果

程序运行后会输出：
1. 迭代过程信息
   - 当前迭代次数
   - 最优成本
   - 平均成本

2. 最终结果
   - 使用的车辆数量
   - 总成本
   - 每辆车的具体配送路径

3. 可视化结果
   - 收敛曲线图：展示算法收敛过程
   - 配送路径图：直观展示最优配送方案

## 算法参数说明

可以在 config.py 中修改的关键参数：

- `n_ants`: 蚂蚁数量，影响解的多样性
- `alpha`: 信息素重要程度因子
- `beta`: 启发函数重要程度因子
- `gamma`: 时间窗口宽度影响因子
- `delta`: 等待时间影响因子
- `r0`: 状态转移规则参数
- `rho`: 信息素挥发系数
- `q`: 信息素增加强度系数
- `max_iter`: 最大迭代次数
- `cap`: 车辆最大装载量

## 注意事项

1. 参数调整建议：
   - 增大蚂蚁数量和迭代次数可以提高解的质量，但会增加计算时间
   - 对于大规模问题，建议适当增加迭代次数
   - 对于时间窗约束紧的问题，可以适当调整gamma和delta参数

2. 性能优化：
   - 可以根据实际问题规模调整参数
   - 较大规模问题可能需要更多的计算资源
   - 建议先用小规模数据测试参数效果